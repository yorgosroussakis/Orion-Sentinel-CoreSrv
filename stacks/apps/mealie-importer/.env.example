# ============================================================================
# Mealie Recipe Importer Environment Configuration
# ============================================================================
#
# Copy this file to .env and customize for your deployment:
#   cp .env.example .env
#   nano .env
#
# ============================================================================

# ============================================================================
# TIMEZONE
# ============================================================================
TZ=Europe/Amsterdam

# ============================================================================
# MEALIE API CONFIGURATION
# ============================================================================

# Mealie base URL (REQUIRED)
# Use container name if on same Docker network
MEALIE_BASE_URL=http://mealie:9000

# Mealie API Token (REQUIRED)
# Generate in Mealie: Settings → API Tokens → Create Token
# Give it a descriptive name like "Recipe Importer Service"
MEALIE_IMPORTER_TOKEN=

# ============================================================================
# IMPORT LIMITS
# ============================================================================

# Backfill mode: Import newest recipes per site (initial import)
BACKFILL_PER_SITE=75
BACKFILL_TOTAL_CAP=1500

# Monthly mode: Import new recipes per site (delta updates)
MONTHLY_PER_SITE=40
MONTHLY_TOTAL_CAP=800

# ============================================================================
# THROTTLING & RATE LIMITING
# ============================================================================

# Seconds between requests to the same domain
THROTTLE_SECONDS=1.0

# Request timeout in seconds
REQUEST_TIMEOUT=30

# User agent string for web requests
USER_AGENT=OrionSentinelMealieImporter/1.0 (+local homelab)

# ============================================================================
# CRON SCHEDULE (for cron container)
# ============================================================================

# Schedule for monthly import runs
# Format: minute hour day-of-month month day-of-week
# Default: 1st day of month at 03:20 local time
CRON_SCHEDULE=20 3 1 * *

# ============================================================================
# LOGGING
# ============================================================================

# Enable JSON structured logging (for Loki/Promtail)
JSON_LOGS=false

# ============================================================================
# USAGE EXAMPLES
# ============================================================================
#
# Run backfill (initial import):
#   docker compose run --rm mealie-importer python /app/importer.py --mode backfill
#
# Run monthly delta import:
#   docker compose run --rm mealie-importer python /app/importer.py --mode monthly
#
# Dry run (discover without importing):
#   docker compose run --rm mealie-importer python /app/importer.py --mode backfill --dry-run
#
# Force import single URL:
#   docker compose run --rm mealie-importer python /app/importer.py --force-url "https://example.com/recipe"
#
# Force reimport all from domain:
#   docker compose run --rm mealie-importer python /app/importer.py --force-domain "example.com"
#
# Reset state for a domain:
#   docker compose run --rm mealie-importer python /app/importer.py --reset-domain "example.com"
#
# ============================================================================
