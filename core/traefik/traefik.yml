# Traefik Static Configuration
# See: https://doc.traefik.io/traefik/reference/static-configuration/file/

# ============================================================================
# Global Configuration
# ============================================================================
global:
  checkNewVersion: true
  sendAnonymousUsage: false

# ============================================================================
# Logging
# ============================================================================
log:
  level: INFO

accessLog: {}

# ============================================================================
# API & Dashboard
# ============================================================================
api:
  dashboard: true
  # Dashboard accessible via Traefik labels in compose.yml
  # Access at: https://traefik.local (protected by Authelia once configured)

# ============================================================================
# Entry Points
# ============================================================================
entryPoints:
  web:
    address: ":80"
    # Redirect all HTTP to HTTPS (secure by default)
    http:
      redirections:
        entryPoint:
          to: websecure
          scheme: https
          permanent: true
  
  websecure:
    address: ":443"

# ============================================================================
# Providers
# ============================================================================
providers:
  # Docker provider for automatic service discovery
  docker:
    endpoint: "unix:///var/run/docker.sock"
    exposedByDefault: false
  
  # File provider for dynamic configuration
  file:
    directory: /etc/traefik/dynamic
    watch: true

# Optional ACME config (commented for now)
# certificatesResolvers:
#   le:
#     acme:
#       email: "${TRAEFIK_ACME_EMAIL}"
#       storage: /acme/acme.json
#       dnsChallenge:
#         provider: "${TRAEFIK_ACME_DNS_PROVIDER}"
#         resolvers:
#           - "1.1.1.1:53"
#           - "8.8.8.8:53"
