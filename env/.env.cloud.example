# Cloud Stack Configuration
# Nextcloud + PostgreSQL

# ============================================================================
# USER/GROUP & TIMEZONE
# ============================================================================
PUID=1000
PGID=1000
TZ=Europe/Amsterdam

# ============================================================================
# HOST DIRECTORY LAYOUT
# ============================================================================
# Nextcloud has its own isolated directory tree
CLOUD_ROOT=/srv/orion-sentinel-core/cloud

# Subdirectories (created automatically):
# ${CLOUD_ROOT}/db       - PostgreSQL database
# ${CLOUD_ROOT}/app      - Nextcloud application files
# ${CLOUD_ROOT}/data     - User files and data

# ============================================================================
# NEXTCLOUD
# ============================================================================
# Admin credentials (used on first startup)
NEXTCLOUD_ADMIN_USER=admin
NEXTCLOUD_ADMIN_PASSWORD=change_me_to_a_strong_password

# Trusted domains (add your actual domain/IP)
NEXTCLOUD_TRUSTED_DOMAINS=cloud.local 192.168.1.100

# Overwrite settings for reverse proxy
NEXTCLOUD_OVERWRITEPROTOCOL=https
NEXTCLOUD_OVERWRITEHOST=cloud.local
NEXTCLOUD_OVERWRITECLIURL=https://cloud.local

# ============================================================================
# POSTGRESQL DATABASE
# ============================================================================
# These variables must match those expected by compose.yml
NEXTCLOUD_DB_NAME=nextcloud
NEXTCLOUD_DB_USER=nextcloud
NEXTCLOUD_DB_PASSWORD=change_me_to_a_strong_database_password

# Database host (service name in Docker network)
POSTGRES_HOST=nextcloud-db

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================
# PHP memory limit (adjust based on your RAM)
PHP_MEMORY_LIMIT=512M

# PHP upload limits
PHP_UPLOAD_LIMIT=10G

# ============================================================================
# BACKUP NOTES
# ============================================================================
# Critical directories to back up:
# 1. ${CLOUD_ROOT}/db       - Database (or use pg_dump)
# 2. ${CLOUD_ROOT}/data     - User files
# 3. ${CLOUD_ROOT}/app/config/config.php - Nextcloud config
#
# Recommended: Daily automated backups with retention policy
# Consider using Restic, Borg, or similar tools
