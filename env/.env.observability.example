# Orion-Sentinel Observability Module Configuration
# Prometheus + Grafana + Loki + Promtail + Uptime Kuma
#
# Usage:
#   1. Copy this file: cp env/.env.observability.example env/.env.observability
#   2. Edit the file to customize your settings
#   3. Start observability: ./scripts/orionctl up observability

# =============================================================================
# USER/GROUP & TIMEZONE
# =============================================================================
PUID=1000
PGID=1000
TZ=Europe/Amsterdam

# =============================================================================
# HOST DIRECTORY PATHS
# =============================================================================
# Observability config root: all monitoring service configurations
# Default matches the path created by ./scripts/bootstrap-coresrv.sh
OBSERVABILITY_CONFIG_ROOT=/srv/orion-sentinel-core/monitoring

# Domain for Traefik routing (requires gateway module)
DOMAIN=orion.lan

# Directory structure:
# /srv/orion-sentinel-core/monitoring/
# ├── prometheus/
# │   ├── prometheus.yml    # Scrape configuration
# │   └── data/             # Time-series data
# ├── grafana/
# │   ├── data/             # Grafana database
# │   └── provisioning/     # Auto-provisioned dashboards/datasources
# ├── loki/
# │   ├── config.yml        # Loki configuration
# │   └── data/             # Log data
# ├── promtail/
# │   └── config.yml        # Log collection config
# └── uptime-kuma/
#     └── data/             # Status page data

# =============================================================================
# PROMETHEUS
# =============================================================================
# Retention period for metrics (how long to keep data)
# Format: [0-9]+(ms|s|m|h|d|w|y)
PROMETHEUS_RETENTION_TIME=15d

# Optional: Storage size limit (delete oldest data when exceeded)
# PROMETHEUS_RETENTION_SIZE=10GB

# =============================================================================
# GRAFANA
# =============================================================================
# Admin credentials (CHANGE THESE!)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change_me_to_a_strong_password

# Optional: Additional plugins to install (comma-separated)
# Example: grafana-piechart-panel,grafana-worldmap-panel
GRAFANA_INSTALL_PLUGINS=

# =============================================================================
# LOKI
# =============================================================================
# Log retention period
# Default: 168h (7 days)
LOKI_RETENTION_PERIOD=168h

# =============================================================================
# UPTIME KUMA
# =============================================================================
# Docker image for Uptime Kuma (status monitoring)
# Using major version tag ':1' for stability while receiving updates
# Override with specific version like 'louislam/uptime-kuma:1.23.16' if needed
UPTIME_KUMA_IMAGE=louislam/uptime-kuma:1

# =============================================================================
# QUICK START
# =============================================================================
# 1. Create directories:
#    sudo mkdir -p /srv/orion-sentinel-core/monitoring/{prometheus/data,grafana/{data,provisioning},loki,promtail,uptime-kuma}
#    sudo chown -R $USER:$USER /srv/orion-sentinel-core/monitoring
#
# 2. Copy config files from monitoring/ directory:
#    cp monitoring/prometheus/prometheus.yml /srv/orion-sentinel-core/monitoring/prometheus/
#    cp monitoring/loki/config.yml /srv/orion-sentinel-core/monitoring/loki/
#    cp monitoring/promtail/config.yml /srv/orion-sentinel-core/monitoring/promtail/
#
# 3. Copy env file:
#    cp env/.env.observability.example env/.env.observability
#
# 4. Start the gateway first (required for Traefik routing):
#    ./scripts/orionctl up gateway
#
# 5. Start observability:
#    ./scripts/orionctl up observability
#
# 6. Access services:
#    https://grafana.orion.lan    - Dashboards
#    https://prometheus.orion.lan - Metrics
#    https://status.orion.lan     - Uptime Kuma

# =============================================================================
# STANDALONE MODE (without Gateway)
# =============================================================================
# If you want to run observability without the gateway module,
# you'll need to add port mappings to the compose file:
#
# In compose/docker-compose.observability.yml, add to each service:
#   ports:
#     - "9090:9090"  # Prometheus
#     - "3000:3000"  # Grafana
#     - "3001:3001"  # Uptime Kuma
#
# Then access via:
#   http://localhost:9090  - Prometheus
#   http://localhost:3000  - Grafana
#   http://localhost:3001  - Uptime Kuma

# =============================================================================
# ALERTS (Future)
# =============================================================================
# For production alerting, configure:
# 1. Prometheus Alertmanager for alert routing
# 2. Grafana notification channels (email, Slack, etc.)
# 3. Uptime Kuma notifications for status page alerts
