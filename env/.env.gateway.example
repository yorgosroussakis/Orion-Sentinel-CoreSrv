# Orion-Sentinel Gateway Module Configuration
# Traefik + Authelia + Redis
#
# Usage:
#   1. Copy this file: cp env/.env.gateway.example env/.env.gateway
#   2. Edit the file to customize your settings (especially secrets!)
#   3. Start the gateway: ./scripts/orionctl up gateway

# =============================================================================
# USER/GROUP & TIMEZONE
# =============================================================================
PUID=1000
PGID=1000
TZ=Europe/Amsterdam

# =============================================================================
# HOST DIRECTORY PATHS
# =============================================================================
# Gateway config root: all gateway service configurations
# Default matches the path created by ./scripts/bootstrap-coresrv.sh
GATEWAY_CONFIG_ROOT=/srv/orion-sentinel-core/core

# Directory structure:
# /srv/orion-sentinel-core/core/
# ├── traefik/
# │   ├── traefik.yml       # Static configuration
# │   ├── dynamic/          # Dynamic configuration files
# │   └── acme/             # Let's Encrypt certificates
# ├── authelia/
# │   ├── configuration.yml # Authelia config
# │   └── users.yml         # User database
# └── redis/
#     └── data/             # Session storage

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================
# Base domain for all services
# All services will be accessible at: service.<DOMAIN>
# Example: jellyfin.orion.lan, grafana.orion.lan, etc.
DOMAIN=orion.lan

# =============================================================================
# AUTHELIA SECRETS (CRITICAL - MUST CHANGE!)
# =============================================================================
# Generate each secret with: openssl rand -hex 32
#
# WARNING: Using default values is a security risk!
# Always generate unique secrets before starting.

# JWT secret for Authelia tokens
AUTHELIA_JWT_SECRET=change-me-run-openssl-rand-hex-32

# Session secret for encrypted session cookies
AUTHELIA_SESSION_SECRET=change-me-run-openssl-rand-hex-32

# Storage encryption key for database encryption
AUTHELIA_STORAGE_ENCRYPTION_KEY=change-me-run-openssl-rand-hex-32

# =============================================================================
# TRAEFIK ACME / LET'S ENCRYPT (Optional - for production SSL)
# =============================================================================
# Uncomment and configure when ready to use Let's Encrypt certificates
# For local-only access with self-signed certs, leave these commented.

# Your email for Let's Encrypt notifications
# TRAEFIK_ACME_EMAIL=you@example.com

# DNS provider for DNS-01 challenge (recommended for wildcard certs)
# Options: cloudflare, route53, digitalocean, etc.
# See: https://doc.traefik.io/traefik/https/acme/#providers
# TRAEFIK_ACME_DNS_PROVIDER=cloudflare

# DNS provider API credentials (example for Cloudflare)
# CLOUDFLARE_EMAIL=you@example.com
# CLOUDFLARE_API_KEY=your_cloudflare_api_key

# Or use Cloudflare API Token (recommended)
# CLOUDFLARE_DNS_API_TOKEN=your_cloudflare_api_token

# =============================================================================
# QUICK START
# =============================================================================
# 1. Create directories:
#    sudo mkdir -p /srv/orion-sentinel-core/core/{traefik/{dynamic,acme},authelia,redis}
#    sudo chown -R $USER:$USER /srv/orion-sentinel-core/core
#
# 2. Copy config files (see core/traefik and core/authelia for templates)
#
# 3. Generate secrets:
#    openssl rand -hex 32  # Run 3 times, update values above
#
# 4. Copy env file:
#    cp env/.env.gateway.example env/.env.gateway
#
# 5. Start gateway:
#    ./scripts/orionctl up gateway
#
# 6. Access services:
#    https://traefik.orion.lan  - Traefik dashboard

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 1. Never commit this file with real secrets to git!
# 2. Store secrets in a password manager
# 3. For production, consider using Docker secrets instead of env vars
# 4. Rotate secrets periodically (every 6-12 months)
