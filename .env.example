# ============================================================================
# Orion-Sentinel-CoreSrv - Master Environment Configuration
# ============================================================================
#
# This is the master .env.example file that consolidates all common settings
# across all modules. Copy this to .env and customize for your deployment.
#
# Quick Start:
#   1. Copy this file: cp .env.example .env
#   2. Edit .env with your settings (domains, paths, credentials)
#   3. Choose profiles: export COMPOSE_PROFILES=core-media,traefik,observability
#   4. Deploy: make up-core  OR  docker compose up -d
#
# For module-specific settings, see env/.env.<module>.example files.
#
# ============================================================================

# ============================================================================
# CORE SYSTEM SETTINGS
# ============================================================================

# User and Group IDs - Run 'id' on your host to find these values
# All containers will run with these IDs for proper file permissions
PUID=1000
PGID=1000

# Timezone - Set to your local timezone
# Full list: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
TZ=Europe/Amsterdam

# ============================================================================
# DOMAIN CONFIGURATION
# ============================================================================

# Base domain for all services
# Services will be accessible at: <service>.<DOMAIN>
# Examples:
#   - jellyfin.example.lan
#   - grafana.example.lan
#   - homeassistant.example.lan
#
# For local development, use '.local' or add entries to /etc/hosts or Pi-hole
DOMAIN=local

# Email for Let's Encrypt SSL certificates (required for production HTTPS)
# Leave empty for local development with self-signed certs
ACME_EMAIL=

# ============================================================================
# STORAGE PATHS
# ============================================================================
# All persistent data is stored under these root directories
# Customize these paths based on your disk layout

# Core services data root (Traefik, Authelia, Redis, etc.)
CORE_ROOT=/srv/orion-sentinel-core/core

# Media stack data root (configs, metadata, etc.)
MEDIA_CONFIG_ROOT=/srv/orion-sentinel-core/media/config

# Media content root (downloads and library)
MEDIA_ROOT=/srv/orion-sentinel-core/media/content

# Monitoring/Observability data root
MONITORING_ROOT=/srv/orion-sentinel-core/monitoring

# Home automation data root
HOME_AUTOMATION_ROOT=/srv/orion-sentinel-core/home-automation

# Cloud services data root (Nextcloud, etc.)
CLOUD_ROOT=/srv/orion-sentinel-core/cloud

# Maintenance services data root (Homepage, Watchtower, etc.)
MAINTENANCE_ROOT=/srv/orion-sentinel-core/maintenance

# ============================================================================
# GATEWAY / TRAEFIK CONFIGURATION
# ============================================================================

# Directory for Traefik configuration and certificates
GATEWAY_CONFIG_ROOT=/srv/orion-sentinel-core/core/traefik

# Traefik dashboard domain
TRAEFIK_DOMAIN=traefik.${DOMAIN}

# Enable Traefik access logs (can be verbose)
TRAEFIK_ACCESS_LOGS=false

# ============================================================================
# AUTHELIA (SSO) SECRETS - **CRITICAL: MUST CHANGE BEFORE DEPLOYMENT**
# ============================================================================
# Generate each secret with: openssl rand -hex 32
#
# WARNING: Using default/example values is a SECURITY RISK!
# Generate unique secrets before starting in production.

# JWT secret for Authelia authentication tokens
AUTHELIA_JWT_SECRET=changeme-run-openssl-rand-hex-32-to-generate

# Session secret for encrypted session cookies
AUTHELIA_SESSION_SECRET=changeme-run-openssl-rand-hex-32-to-generate

# Storage encryption key for Authelia database encryption
AUTHELIA_STORAGE_ENCRYPTION_KEY=changeme-run-openssl-rand-hex-32-to-generate

# Authelia domain
AUTHELIA_DOMAIN=auth.${DOMAIN}

# ============================================================================
# MEDIA STACK CONFIGURATION
# ============================================================================

# VPN Configuration (for torrent privacy)
# Only required if using VPN profile for qBittorrent
VPN_ENABLED=false
VPN_SERVICE_PROVIDER=protonvpn
VPN_TYPE=wireguard

# ProtonVPN WireGuard credentials (get from ProtonVPN account)
# Leave empty if not using VPN
VPN_WIREGUARD_PRIVATE_KEY=
VPN_WIREGUARD_ADDRESS=10.2.0.2/32
VPN_ENDPOINT_PORT=51820
VPN_COUNTRY=Netherlands

# Media service API keys (auto-generated after first startup)
# Retrieve from each service's settings UI after deployment
SONARR_API_KEY=
RADARR_API_KEY=
JELLYFIN_API_KEY=

# Jellyseerr domain
JELLYSEERR_DOMAIN=requests.${DOMAIN}

# ============================================================================
# MONITORING / OBSERVABILITY CONFIGURATION
# ============================================================================

# Prometheus retention period (how long to keep metrics)
PROMETHEUS_RETENTION_TIME=15d

# Grafana admin credentials
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=changeme-secure-password

# Grafana domain
GRAFANA_DOMAIN=grafana.${DOMAIN}

# Prometheus domain
PROMETHEUS_DOMAIN=prometheus.${DOMAIN}

# Loki retention period (how long to keep logs)
LOKI_RETENTION_PERIOD=720h

# Uptime Kuma domain
UPTIME_KUMA_DOMAIN=uptime.${DOMAIN}

# ============================================================================
# HOME AUTOMATION CONFIGURATION
# ============================================================================

# Home Assistant domain
HOMEASSISTANT_DOMAIN=ha.${DOMAIN}

# Zigbee coordinator device path
# Find your device: ls -l /dev/serial/by-id/
# Common paths: /dev/ttyACM0, /dev/ttyUSB0
ZIGBEE_DEVICE=/dev/ttyACM0

# Zigbee2MQTT domain
ZIGBEE2MQTT_DOMAIN=zigbee.${DOMAIN}

# MQTT broker credentials (for Mosquitto)
# Change these for security
MQTT_USER=mqtt
MQTT_PASSWORD=changeme-secure-password

# Mealie domain (recipe management)
MEALIE_DOMAIN=mealie.${DOMAIN}

# DSMR Reader configuration (Dutch smart meter)
# P1 port device path (typically /dev/ttyUSB0)
DSMR_DEVICE=/dev/ttyUSB0
DSMR_DOMAIN=dsmr.${DOMAIN}

# ============================================================================
# CLOUD SERVICES CONFIGURATION
# ============================================================================

# Nextcloud domain
NEXTCLOUD_DOMAIN=cloud.${DOMAIN}

# Nextcloud admin credentials
NEXTCLOUD_ADMIN_USER=admin
NEXTCLOUD_ADMIN_PASSWORD=changeme-secure-password

# Nextcloud database password
NEXTCLOUD_DB_PASSWORD=changeme-secure-password

# ============================================================================
# MAINTENANCE / DASHBOARD CONFIGURATION
# ============================================================================

# Homepage/Dashy domain (dashboard)
HOMEPAGE_DOMAIN=home.${DOMAIN}

# Watchtower - automatic container updates
# Set to 'true' to enable automatic updates (use with caution!)
WATCHTOWER_ENABLED=false

# ============================================================================
# DOCKER COMPOSE PROFILES
# ============================================================================
# Uncomment the profiles you want to enable
# You can also set this via: export COMPOSE_PROFILES=core-media,traefik
#
# Available profiles:
#   - core-media    : Jellyfin, qBittorrent, Sonarr, Radarr, Prowlarr, Jellyseerr
#   - traefik       : Traefik reverse proxy + Authelia SSO
#   - observability : Prometheus, Grafana, Loki, Uptime Kuma
#   - home-automation : Home Assistant, Zigbee2MQTT, Mosquitto, Mealie
#   - extras        : Additional utilities and services

# Default: Start with core media stack
# COMPOSE_PROFILES=core-media

# Production setup: All essential services
# COMPOSE_PROFILES=core-media,traefik,observability

# Full stack: Everything enabled
# COMPOSE_PROFILES=core-media,traefik,observability,home-automation,extras

# ============================================================================
# ADVANCED SETTINGS
# ============================================================================

# Docker network subnet (change if conflicts with your local network)
DOCKER_SUBNET=172.20.0.0/16

# Enable debug logging for troubleshooting
DEBUG=false

# Container restart policy (unless-stopped, always, on-failure, no)
RESTART_POLICY=unless-stopped

# ============================================================================
# SECURITY NOTES
# ============================================================================
#
# 1. NEVER commit this .env file with real secrets to version control!
#    It's already in .gitignore, but be careful when sharing code.
#
# 2. Store your .env file securely (password manager, encrypted backup)
#
# 3. Use strong, unique passwords for all services
#
# 4. Rotate secrets periodically (every 6-12 months minimum)
#
# 5. For production, consider using Docker secrets instead of env vars:
#    https://docs.docker.com/engine/swarm/secrets/
#
# 6. Enable 2FA in Authelia for all admin users
#
# 7. Use VPN for torrent traffic to protect your privacy
#
# ============================================================================
# DIRECTORY STRUCTURE
# ============================================================================
#
# After running setup, your directory structure will be:
#
# /srv/orion-sentinel-core/
# ├── core/
# │   ├── traefik/          # Reverse proxy configs
# │   ├── authelia/         # SSO configs and user database
# │   └── redis/            # Session storage
# ├── media/
# │   ├── config/           # Service configs (Jellyfin, Sonarr, etc.)
# │   │   ├── jellyfin/
# │   │   ├── sonarr/
# │   │   ├── radarr/
# │   │   └── ...
# │   └── content/          # Media files
# │       ├── downloads/    # qBittorrent downloads
# │       │   ├── movies/
# │       │   └── tv/
# │       └── library/      # Organized media library
# │           ├── movies/
# │           └── tv/
# ├── monitoring/
# │   ├── prometheus/
# │   ├── grafana/
# │   ├── loki/
# │   └── uptime-kuma/
# ├── home-automation/
# │   ├── homeassistant/
# │   ├── zigbee2mqtt/
# │   ├── mosquitto/
# │   └── mealie/
# └── cloud/
#     └── nextcloud/
#
# ============================================================================
